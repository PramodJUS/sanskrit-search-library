<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sanskrit Search - Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            padding: 40px;
        }

        h1 {
            color: #667eea;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1rem;
        }

        .demo-section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .demo-section h2 {
            color: #764ba2;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .input-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
        }

        textarea, input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            font-family: 'Noto Sans Devanagari', sans-serif;
            transition: border-color 0.3s;
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        textarea:focus, input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .results {
            margin-top: 25px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 2px solid #667eea;
            min-height: 100px;
        }

        .results h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .result-item {
            padding: 12px;
            margin-bottom: 10px;
            background: #f0f4ff;
            border-radius: 6px;
            border-left: 3px solid #764ba2;
        }

        .match-highlight {
            background: #ffd700;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        .pratika-highlight {
            background: #90ee90;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        .info-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #2196f3;
        }

        .sanskrit-text {
            font-family: 'Noto Sans Devanagari', sans-serif;
            font-size: 1.2rem;
            line-height: 1.8;
        }

        code {
            background: #f5f5f5;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>Sanskrit Search Library</h1>
        <p class="subtitle">Advanced Sanskrit text search with sandhi splitting and pratika identification</p>

        <!-- Search Demo -->
        <div class="demo-section">
            <h2>1. Sanskrit Text Search</h2>
            <div class="info-box">
                <strong>Feature:</strong> Search for Sanskrit words even when they are combined with sandhi. 
                The library automatically handles sandhi splitting to find matches.
            </div>
            
            <div class="input-group">
                <label for="searchText">Text to search in (Haystack):</label>
                <textarea id="searchText" class="sanskrit-text">अथातो ब्रह्मजिज्ञासा। जन्माद्यस्य यतः। शास्त्रयोनित्वात्।</textarea>
            </div>

            <div class="input-group">
                <label for="searchQuery">Search for (Needle):</label>
                <input type="text" id="searchQuery" class="sanskrit-text" value="ब्रह्म">
            </div>

            <button onclick="performSearch()">Search</button>

            <div id="searchResults" class="results" style="display: none;">
                <h3>Search Results:</h3>
                <div id="searchResultsContent"></div>
            </div>
        </div>

        <!-- Pratika Demo -->
        <div class="demo-section">
            <h2>2. Pratika Identification</h2>
            <div class="info-box">
                <strong>Feature:</strong> Automatically identify pratika grahana (quotation markers) in Sanskrit text.
                Pratikas are words ending in 'ति', 'इति', etc., that indicate quotations from original texts.
            </div>
            
            <div class="input-group">
                <label for="pratikaText">Sanskrit text with pratikas:</label>
                <textarea id="pratikaText" class="sanskrit-text">अथशब्दः अनन्तर्यार्थः। ब्रह्मशब्देन परमात्मा उच्यते इति।</textarea>
            </div>

            <button onclick="identifyPratikas()">Identify Pratikas</button>

            <div id="pratikaResults" class="results" style="display: none;">
                <h3>Pratika Results:</h3>
                <div id="pratikaResultsContent"></div>
            </div>
        </div>

        <!-- Sandhi Demo -->
        <div class="demo-section">
            <h2>3. Sandhi Splitting</h2>
            <div class="info-box">
                <strong>Feature:</strong> Split Sanskrit words at sandhi junctions to understand word boundaries.
            </div>
            
            <div class="input-group">
                <label for="sandhiText">Sanskrit word with sandhi:</label>
                <input type="text" id="sandhiText" class="sanskrit-text" value="ब्रह्मजिज्ञासा">
            </div>

            <button onclick="splitSandhi()">Split Sandhi</button>

            <div id="sandhiResults" class="results" style="display: none;">
                <h3>Possible Splits:</h3>
                <div id="sandhiResultsContent"></div>
            </div>
        </div>

        <!-- Installation Guide -->
        <div class="demo-section">
            <h2>Installation & Usage</h2>
            <div class="info-box">
                <strong>NPM:</strong> <code>npm install sanskrit-search</code>
            </div>
            <pre style="background: #f5f5f5; padding: 15px; border-radius: 8px; overflow-x: auto;"><code>// Import the library
const SanskritSearch = require('sanskrit-search');

// Create an instance
const searcher = new SanskritSearch();

// Search for text
const results = searcher.search("अथातो ब्रह्मजिज्ञासा", "ब्रह्म");
console.log(results);</code></pre>
        </div>
    </div>

    <!-- Include the library files -->
    <script src="sandhi-rules.js"></script>
    <script src="pratika.js"></script>
    <script src="sanskrit-search.js"></script>

    <script>
        // Search functionality
        function performSearch() {
            const haystack = document.getElementById('searchText').value;
            const needle = document.getElementById('searchQuery').value;
            
            const searcher = new SanskritSearch();
            const results = searcher.search(haystack, needle);
            
            const resultsDiv = document.getElementById('searchResults');
            const contentDiv = document.getElementById('searchResultsContent');
            
            resultsDiv.style.display = 'block';
            
            if (results && results.length > 0) {
                let html = `<p><strong>Found ${results.length} match(es):</strong></p>`;
                results.forEach((result, index) => {
                    html += `<div class="result-item">
                        <strong>Match ${index + 1}:</strong><br>
                        Position: ${result.position || 'N/A'}<br>
                        Context: <span class="sanskrit-text">${highlightMatch(result.context || haystack, needle)}</span>
                    </div>`;
                });
                contentDiv.innerHTML = html;
            } else {
                contentDiv.innerHTML = '<p>No matches found.</p>';
            }
        }

        // Pratika identification
        function identifyPratikas() {
            const text = document.getElementById('pratikaText').value;
            
            const identifier = new PratikaIdentifier();
            const pratikas = identifier.identifyPratikas(text);
            
            const resultsDiv = document.getElementById('pratikaResults');
            const contentDiv = document.getElementById('pratikaResultsContent');
            
            resultsDiv.style.display = 'block';
            
            if (pratikas && pratikas.length > 0) {
                let html = `<p><strong>Found ${pratikas.length} pratika(s):</strong></p>`;
                pratikas.forEach((pratika, index) => {
                    html += `<div class="result-item">
                        <strong>Pratika ${index + 1}:</strong><br>
                        Word: <span class="pratika-highlight sanskrit-text">${pratika.word}</span><br>
                        Type: ${pratika.type}<br>
                        Position: ${pratika.position}
                    </div>`;
                });
                contentDiv.innerHTML = html;
            } else {
                contentDiv.innerHTML = '<p>No pratikas found.</p>';
            }
        }

        // Sandhi splitting
        function splitSandhi() {
            const word = document.getElementById('sandhiText').value;
            
            const searcher = new SanskritSearch();
            // Assuming there's a sandhi splitting method
            const splits = searcher.splitSandhi ? searcher.splitSandhi(word) : ['Feature not yet implemented'];
            
            const resultsDiv = document.getElementById('sandhiResults');
            const contentDiv = document.getElementById('sandhiResultsContent');
            
            resultsDiv.style.display = 'block';
            
            if (splits && splits.length > 0) {
                let html = '<div class="result-item">';
                splits.forEach((split, index) => {
                    html += `<div class="sanskrit-text">${index + 1}. ${split}</div>`;
                });
                html += '</div>';
                contentDiv.innerHTML = html;
            } else {
                contentDiv.innerHTML = '<p>Could not split the word.</p>';
            }
        }

        // Helper function to highlight matches
        function highlightMatch(text, needle) {
            const regex = new RegExp(`(${needle})`, 'gi');
            return text.replace(regex, '<span class="match-highlight">$1</span>');
        }
    </script>
</body>
</html>
