<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pratika Identifier Test</title>
    <style>
        body {
            font-family: 'Noto Sans Devanagari', Arial, sans-serif;
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 {
            color: #333;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }
        .test-container {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .input-section {
            margin-bottom: 30px;
        }
        input[type="text"] {
            width: 300px;
            padding: 10px;
            font-size: 18px;
            font-family: 'Noto Sans Devanagari', Arial;
            border: 2px solid #ddd;
            border-radius: 4px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }
        button:hover {
            background: #45a049;
        }
        .result {
            margin-top: 20px;
            padding: 15px;
            background: #f9f9f9;
            border-left: 4px solid #4CAF50;
            border-radius: 4px;
        }
        .result.error {
            border-left-color: #f44336;
            background: #ffebee;
        }
        .result.not-pratika {
            border-left-color: #ff9800;
            background: #fff3e0;
        }
        .result-row {
            margin: 8px 0;
            display: flex;
            gap: 10px;
        }
        .result-label {
            font-weight: bold;
            min-width: 180px;
            color: #555;
        }
        .result-value {
            font-family: 'Noto Sans Devanagari', monospace;
            color: #000;
        }
        .test-cases {
            margin-top: 30px;
        }
        .test-case {
            display: inline-block;
            margin: 5px;
            padding: 8px 12px;
            background: #e3f2fd;
            border: 1px solid #2196F3;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Noto Sans Devanagari', Arial;
        }
        .test-case:hover {
            background: #bbdefb;
        }
        .batch-results {
            margin-top: 20px;
        }
        .batch-item {
            padding: 10px;
            margin: 10px 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .batch-item.success {
            border-left: 4px solid #4CAF50;
        }
        .batch-item.failure {
            border-left: 4px solid #f44336;
        }
        .confidence-bar {
            display: inline-block;
            width: 100px;
            height: 20px;
            background: #ddd;
            border-radius: 10px;
            overflow: hidden;
            vertical-align: middle;
            margin-left: 10px;
        }
        .confidence-fill {
            height: 100%;
            background: linear-gradient(to right, #f44336, #ff9800, #4CAF50);
            transition: width 0.3s;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
    <h1>üïâÔ∏è Pratika Identifier Test Suite</h1>
    
    <div class="test-container">
        <h2>Single Test</h2>
        <div class="input-section">
            <input type="text" id="testInput" placeholder="Enter text (e.g., ‡§®‡§æ‡§∞‡§æ‡§Ø‡§£‡§Æ‡§ø‡§§‡§ø)" />
            <button onclick="runTest()">Test</button>
            <button onclick="clearResults()">Clear</button>
        </div>
        
        <div id="singleResult"></div>
        
        <div class="test-cases">
            <h3>Quick Test Cases (click to test):</h3>
            <span class="test-case" onclick="testQuick('‡§®‡§æ‡§∞‡§æ‡§Ø‡§£‡§Æ‡§ø‡§§‡§ø')">‡§®‡§æ‡§∞‡§æ‡§Ø‡§£‡§Æ‡§ø‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§∞‡§æ‡§Æ‡•á‡§§‡§ø')">‡§∞‡§æ‡§Æ‡•á‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§π‡§∞‡§ø‡§∞‡§ø‡§§‡§ø')">‡§π‡§∞‡§ø‡§∞‡§ø‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§µ‡§æ‡§Ø‡•ç‡§µ‡§ø‡§§‡§ø')">‡§µ‡§æ‡§Ø‡•ç‡§µ‡§ø‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§£‡•á ‡§á‡§§‡§ø')">‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§£‡•á ‡§á‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§à‡§∂‡•ç‡§µ‡§∞‡§∏‡•ç‡§Ø‡•á‡§§‡§ø')">‡§à‡§∂‡•ç‡§µ‡§∞‡§∏‡•ç‡§Ø‡•á‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§∏‡§§‡•ç‡§Ø‡§Æ‡§ø‡§§‡§ø')">‡§∏‡§§‡•ç‡§Ø‡§Æ‡§ø‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§ú‡•ç‡§û‡•á‡§Ø‡§Æ‡§ø‡§§‡§ø')">‡§ú‡•ç‡§û‡•á‡§Ø‡§Æ‡§ø‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§ß‡§∞‡•ç‡§Æ‡§æ‡§¶‡§ø‡§§‡§ø')">‡§ß‡§∞‡•ç‡§Æ‡§æ‡§¶‡§ø‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§ó‡•Å‡§∞‡•Å‡§£‡§æ ‡§á‡§§‡§ø')">‡§ó‡•Å‡§∞‡•Å‡§£‡§æ ‡§á‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§Ø‡•à ‡§á‡§§‡§ø')">‡§µ‡§ø‡§¶‡•ç‡§Ø‡§æ‡§Ø‡•à ‡§á‡§§‡§ø</span>
            <span class="test-case" onclick="testQuick('‡§≠‡•Ç‡§§‡§ø')">‡§≠‡•Ç‡§§‡§ø (not pratika)</span>
            <span class="test-case" onclick="testQuick('‡§¶‡•ç‡§Ø‡•Å‡§§‡§ø')">‡§¶‡•ç‡§Ø‡•Å‡§§‡§ø (not pratika)</span>
            <span class="test-case" onclick="testQuick('‡§Ø‡§•‡§æ‡§Æ‡§§‡§ø')">‡§Ø‡§•‡§æ‡§Æ‡§§‡§ø (not pratika)</span>
            <span class="test-case" onclick="testQuick('‡§®‡§æ‡§∞‡§æ‡§Ø‡§£')">‡§®‡§æ‡§∞‡§æ‡§Ø‡§£ (not pratika)</span>
            <span class="test-case" onclick="testQuick('‡§Ö‡§≠‡§æ‡§µ')">‡§Ö‡§≠‡§æ‡§µ (not pratika)</span>
        </div>
    </div>
    
    <div class="test-container">
        <h2>Batch Testing</h2>
        <button onclick="runBatchTest()">Run All Tests</button>
        <div id="batchResults" class="batch-results"></div>
    </div>

    <script src="../pratika.js"></script>
    <script>
        const identifier = new PratikaIdentifier();
        
        function runTest() {
            const input = document.getElementById('testInput').value;
            if (!input) {
                alert('Please enter some text to test');
                return;
            }
            displayResult(input);
        }
        
        function testQuick(text) {
            document.getElementById('testInput').value = text;
            displayResult(text);
        }
        
        function displayResult(text) {
            const result = identifier.identifyPratika(text);
            const searchableForms = identifier.extractSearchableForms(text);
            const resultDiv = document.getElementById('singleResult');
            
            if (!result) {
                resultDiv.innerHTML = '<div class="result error"><strong>Error:</strong> Invalid input</div>';
                return;
            }
            
            if (!result.isPratika) {
                resultDiv.innerHTML = `
                    <div class="result not-pratika">
                        <div class="result-row">
                            <span class="result-label">Input Text:</span>
                            <span class="result-value">${result.originalText}</span>
                        </div>
                        <div class="result-row">
                            <span class="result-label">Result:</span>
                            <span class="result-value" style="color: #ff9800; font-weight: bold;">Not a Pratika</span>
                        </div>
                    </div>
                `;
                return;
            }
            
            const confidencePercent = result.confidence;
            const confidenceColor = confidencePercent >= 85 ? '#4CAF50' : confidencePercent >= 70 ? '#ff9800' : '#f44336';
            
            resultDiv.innerHTML = `
                <div class="result">
                    <div class="result-row">
                        <span class="result-label">Input Text:</span>
                        <span class="result-value">${result.originalText}</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">‚úì Is Pratika:</span>
                        <span class="result-value" style="color: #4CAF50; font-weight: bold;">YES</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">Extracted Stem:</span>
                        <span class="result-value" style="font-size: 20px; font-weight: bold; color: #1976D2;">${result.stem}</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">Searchable Forms:</span>
                        <span class="result-value" style="font-size: 18px; font-weight: bold; color: #388E3C;">${searchableForms ? searchableForms.join(', ') : result.stem}</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">Pattern Type:</span>
                        <span class="result-value">${result.pattern}</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">Description:</span>
                        <span class="result-value">${result.patternDescription}</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">‡§á‡§§‡§ø Ending:</span>
                        <span class="result-value">${result.itiEnding}</span>
                    </div>
                    <div class="result-row">
                        <span class="result-label">Confidence:</span>
                        <span class="result-value">${confidencePercent}%</span>
                        <div class="confidence-bar">
                            <div class="confidence-fill" style="width: ${confidencePercent}%; background: ${confidenceColor};"></div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function clearResults() {
            document.getElementById('singleResult').innerHTML = '';
            document.getElementById('testInput').value = '';
        }
        
        function runBatchTest() {
            const testCases = [
                { input: '‡§®‡§æ‡§∞‡§æ‡§Ø‡§£‡§Æ‡§ø‡§§‡§ø', expectedStem: '‡§®‡§æ‡§∞‡§æ‡§Ø‡§£‡§Æ‡•ç', shouldBePratika: true },
                { input: '‡§∞‡§æ‡§Æ‡•á‡§§‡§ø', expectedStem: '‡§∞‡§æ‡§Æ', shouldBePratika: true },
                { input: '‡§π‡§∞‡§ø‡§∞‡§ø‡§§‡§ø', expectedStem: '‡§π‡§∞‡§ø‡§É', shouldBePratika: true },
                { input: '‡§∞‡§æ‡§Æ‡§∞‡§ø‡§§‡§ø', expectedStem: '‡§∞‡§æ‡§Æ‡§É', shouldBePratika: true },
                { input: '‡§µ‡§æ‡§Ø‡•ç‡§µ‡§ø‡§§‡§ø', expectedStem: '‡§µ‡§æ‡§Ø‡•Å', shouldBePratika: true },
                { input: '‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§£‡•á ‡§á‡§§‡§ø', expectedStem: '‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§£‡•á', shouldBePratika: true },
                { input: '‡§à‡§∂‡•ç‡§µ‡§∞‡§∏‡•ç‡§Ø‡•á‡§§‡§ø', expectedStem: '‡§à‡§∂‡•ç‡§µ‡§∞‡§∏‡•ç‡§Ø', shouldBePratika: true },
                { input: '‡§∏‡§§‡•ç‡§Ø‡§Æ‡§ø‡§§‡§ø', expectedStem: '‡§∏‡§§‡•ç‡§Ø‡§Æ‡•ç', shouldBePratika: true },
                { input: '‡§ú‡•ç‡§û‡•á‡§Ø‡§Æ‡§ø‡§§‡§ø', expectedStem: '‡§ú‡•ç‡§û‡•á‡§Ø‡§Æ‡•ç', shouldBePratika: true },
                { input: '‡§ß‡§∞‡•ç‡§Æ‡§æ‡§¶‡§ø‡§§‡§ø', expectedStem: '‡§ß‡§∞‡•ç‡§Æ‡§æ‡§§‡•ç, ‡§ß‡§∞‡•ç‡§Æ‡§æ‡§¶‡•ç', shouldBePratika: true },
                { input: '‡§π‡§∞‡§æ‡§µ‡§ø‡§§‡§ø', expectedStem: '‡§π‡§∞‡•å', shouldBePratika: true },
                { input: '‡§∏‡•ç‡§Ø‡§æ‡§¶‡§ø‡§§‡§ø', expectedStem: '‡§∏‡•ç‡§Ø‡§æ‡§§‡•ç', shouldBePratika: true },
                { input: '‡§∂‡§æ‡§∏‡•ç‡§§‡•ç‡§∞‡§æ‡§∞‡•ç‡§• ‡§á‡§§‡§ø', expectedStem: '‡§∂‡§æ‡§∏‡•ç‡§§‡•ç‡§∞‡§æ‡§∞‡•ç‡§•‡•á, ‡§∂‡§æ‡§∏‡•ç‡§§‡•ç‡§∞‡§æ‡§∞‡•ç‡§•‡§É', shouldBePratika: true },
                { input: '‡§≠‡•Ç‡§§‡§ø', expectedStem: null, shouldBePratika: false },
                { input: '‡§¶‡•ç‡§Ø‡•Å‡§§‡§ø', expectedStem: null, shouldBePratika: false },
                { input: '‡§Ø‡§•‡§æ‡§Æ‡§§‡§ø', expectedStem: null, shouldBePratika: false },
                { input: '‡§®‡§æ‡§∞‡§æ‡§Ø‡§£', expectedStem: null, shouldBePratika: false },
                { input: '‡§Ö‡§≠‡§æ‡§µ', expectedStem: null, shouldBePratika: false },
                { input: '‡§¨‡•ç‡§∞‡§π‡•ç‡§Æ‡§æ', expectedStem: null, shouldBePratika: false }
            ];
            
            const resultsDiv = document.getElementById('batchResults');
            let html = '<h3>Test Results:</h3>';
            let passed = 0;
            let failed = 0;
            
            testCases.forEach((testCase, index) => {
                const result = identifier.identifyPratika(testCase.input);
                const searchableForms = identifier.extractSearchableForms(testCase.input);
                const isPratikaCorrect = result.isPratika === testCase.shouldBePratika;
                const stemCorrect = testCase.shouldBePratika ? (result.stem === testCase.expectedStem) : true;
                const success = isPratikaCorrect && stemCorrect;
                
                if (success) passed++;
                else failed++;
                
                const formsDisplay = searchableForms && searchableForms.length > 1 
                    ? `Forms: ${searchableForms.join(', ')}` 
                    : result.stem ? `Stem: ${result.stem}` : '';
                
                html += `
                    <div class="batch-item ${success ? 'success' : 'failure'}">
                        <strong>Test ${index + 1}:</strong> ${testCase.input}
                        ${success ? '‚úì' : '‚úó'}
                        <br/>
                        <small>
                            Expected: ${testCase.shouldBePratika ? 'Pratika' : 'Not Pratika'}
                            ${testCase.expectedStem ? ` ‚Üí Stem: ${testCase.expectedStem}` : ''}
                            <br/>
                            Got: ${result.isPratika ? 'Pratika' : 'Not Pratika'}
                            ${result.isPratika ? ` ‚Üí ${formsDisplay}` : ''}
                            ${result.isPratika ? ` (${result.pattern}, ${result.confidence}% confidence)` : ''}
                        </small>
                    </div>
                `;
            });
            
            html = `<div style="padding: 15px; background: ${passed === testCases.length ? '#e8f5e9' : '#fff3e0'}; border-radius: 4px; margin-bottom: 20px;">
                        <strong>Summary:</strong> ${passed} passed, ${failed} failed out of ${testCases.length} tests
                    </div>` + html;
            
            resultsDiv.innerHTML = html;
        }
        
        // Run batch test on load
        window.onload = function() {
            console.log('Pratika Identifier loaded successfully');
        };
    </script>
</body>
</html>
